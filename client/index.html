<!DOCTYPE html>​
​<html lang="en" ng-app="issues">​
​<head>​
	<meta charset="UTF-8">​
	<title>Neighborhood Watch</title>​
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>​
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>​
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">​
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.5/angular.min.js"/></script>​
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.5/angular-route.min.js"></script> 
    <script src="https://maps.googleapis.com/maps/api/js"></script>
​</head>​
<script type="text/javascript">
   var issues = angular.module('issues', ['ngRoute']);
issues.config(function($routeProvider){
    $routeProvider
    .when('/',{
        templateUrl: 'partials/login.html'
    })
    .when('/register', {
        templateUrl: 'partials/register.html'
    })
    .when('/home',{
    	templateUrl: 'partials/home.html'
    });
});

issues.controller('UserController', function ($scope,UserFactory,$location){

    $scope.login = function(){
    	UserFactory.login($scope.logged_user, function(){
    		$location.path('/home');
    	});
    };

    $scope.register = function(){
    	if($scope.new_user.password === $scope.new_user.confirmPassword){
    		UserFactory.register($scope.new_user,function(){
    			$location.path('/home');
    		});

    	}else{
    		console.log("Passwords doesn't match");
    	}
    };
});

issues.factory('UserFactory',function($http){
    var factory = {};
    factory.login = function(info,callback){
        $http.post('/login',info).success(function(output){
            callback(output);
        });        
    };
    factory.register = function(info,callback){
    	//console.log(info);
        $http.post('/register',info).success(function(output){
            callback(output);
        });        
    };

    return factory;
});
</script>
​<body>​

<div ng-view="">
</div>
​</body>​
​</html>
